<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Portfolio 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-gradient-to-br from-indigo-950 to-slate-900 min-h-screen text-white md:p-8 p-0">




<!-- Mobile Nav Overlay -->
    <div class="nav-overlay" id="navOverlay" onclick="toggleMobileNav()"></div>

    <!-- Responsive Navigation -->
    <nav id="sideNav" class="fixed left-0 top-0 h-full w-64 bg-black/80 backdrop-blur-md z-50 flex flex-col p-6 md:p-8 transition-transform duration-300 ease-in-out transform -translate-x-full md:translate-x-0 md:fixed overflow-y-auto">
        
        <!-- Close Button for Mobile -->
        <button onclick="toggleMobileNav()" class="md:hidden absolute top-4 right-4 text-gray-400 hover:text-white">
            <i class="fas fa-times text-2xl"></i>
        </button>








        
   <!-- Profile Image -->
        <img id="navProfileImage"
            src="https://imgs.search.brave.com/ntLd9g5FWU0biphaC1KAVUJuOltomYnVGvsQpcZhCu8/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9pLnBp/bmltZy5jb20vb3Jp/Z2luYWxzLzFlL2Rl/L2I3LzFlZGViN2Uw/ZDY5MTFkNTZlNDRk/MjE1YTE4YWRjNjU5/LmpwZw"
            alt="Profile"
            class="w-32 h-32 rounded-full object-cover mb-6 border-2 border-cyan-400" />
        
        <!-- Profile Name -->
        <div class="flex items-center mb-6">
            <h1 id="navProfileName" class="text-2xl font-bold text-cyan-400">Your Name</h1>
        </div>

        <!-- Social Media Icons -->
        <div class="flex gap-2 mb-10 justify-center" id="navSocialIcons">
            <a href="#" id="nav-github" target="_blank" rel="noopener noreferrer" class="w-9 h-9 bg-black/50 rounded-full flex items-center justify-center text-cyan-400 hover:bg-cyan-400 hover:text-black transition-all hover:scale-110 text-sm" title="GitHub">
                <i class="fab fa-github"></i>
            </a>
            <a href="#" id="nav-linkedin" target="_blank" rel="noopener noreferrer" class="w-9 h-9 bg-black/50 rounded-full flex items-center justify-center text-cyan-400 hover:bg-cyan-400 hover:text-black transition-all hover:scale-110 text-sm" title="LinkedIn">
                <i class="fab fa-linkedin"></i>
            </a>
            <a href="#" id="nav-twitter" target="_blank" rel="noopener noreferrer" class="w-9 h-9 bg-black/50 rounded-full flex items-center justify-center text-cyan-400 hover:bg-cyan-400 hover:text-black transition-all hover:scale-110 text-sm" title="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="#" id="nav-instagram" target="_blank" rel="noopener noreferrer" class="w-9 h-9 bg-black/50 rounded-full flex items-center justify-center text-cyan-400 hover:bg-cyan-400 hover:text-black transition-all hover:scale-110 text-sm" title="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
        </div>

        <!-- Navigation Menu -->
        <ul class="space-y-6 text-lg flex-1">
            <li><a href="#hero" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-home mr-3"></i>Quest</a></li>
            <li><a href="#about" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-user mr-3"></i>About</a></li>
            <li><a href="#education" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-graduation-cap mr-3"></i>Education</a></li>
            <li><a href="#job-experience" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-briefcase mr-3"></i>Job Experience</a></li>
            <li><a href="#skills" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-code mr-3"></i>Skills</a></li>
            <li><a href="#projects" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-briefcase mr-3"></i>Projects</a></li>
            <li><a href="#blog" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-blog mr-3"></i>Insights & Blog</a></li>
            <li><a href="#contact" onclick="toggleMobileNav()" class="flex items-center text-gray-400 hover:text-white transition-all"><i class="fas fa-envelope mr-3"></i>Contact</a></li>
            <li><a href="admin.html" class="flex items-center text-red-400 hover:text-white transition-all"><i class="fas fa-cog mr-3"></i>Admin</a></li>
        </ul>
    </nav>

    <!-- Mobile Top Bar (profile left, menu right) -->
    <div class="md:hidden sticky top-0 left-0 right-0 z-40 flex items-center justify-between p-3 bg-black/80 backdrop-blur-md border-b border-cyan-400/20">
        <div class="flex items-center gap-3 ml-1">
            <img id="mobileProfileImage" src="https://imgs.search.brave.com/ntLd9g5FWU0biphaC1KAVUJuOltomYnVGvsQpcZhCu8/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9pLnBp/bmltZy5jb20vb3Jp/Z2luYWxzLzFlL2Rl/L2I3LzFlZGViN2Uw/ZDY5MTFkNTZlNDRk/MjE1YTE4YWRjNjU5/LmpwZw" alt="Profile" class="w-10 h-10 rounded-full object-cover border-2 border-cyan-400">
            <div class="flex flex-col">
                <span id="mobileProfileName" class="text-sm font-semibold text-cyan-400">Your Name</span>
            </div>
        </div>
        <button onclick="toggleMobileNav()" class="mr-1 bg-black/0 p-2 rounded-lg text-cyan-400 hover:text-white">
            <i class="fas fa-bars text-2xl"></i>
        </button>
    </div>






    <div class="max-w-7xl mx-auto md:ml-64 md:mr-0">
        <div class="flex justify-between items-center mb-12">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                <i class="fas fa-cog mr-4"></i>Admin Dashboard
            </h1>
            <button onclick="logout()"
                class="bg-red-500 hover:bg-red-600 px-6 py-2 rounded-xl text-white font-bold">Logout</button>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex gap-2 mb-8 flex-wrap">
            <button onclick="switchSection('profile', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-id-card mr-2"></i>Profile</button>
            <button onclick="switchSection('hero', this)" class="tab-btn active px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-image mr-2"></i>Hero</button>
            <button onclick="switchSection('about', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-user mr-2"></i>About</button>
            <button onclick="switchSection('education', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-graduation-cap mr-2"></i>Education</button>
            <button onclick="switchSection('experience', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-briefcase mr-2"></i>Experience</button>
            <button onclick="switchSection('skills', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-bolt mr-2"></i>Skills</button>
            <button onclick="switchSection('projects', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-briefcase mr-2"></i>Projects</button>
            <button onclick="switchSection('blog', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-pen-fancy mr-2"></i>Blog</button>
            <button onclick="switchSection('messages', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-envelope mr-2"></i>Messages <span id="messageCount" class="bg-red-500 px-2 py-1 rounded ml-2 text-xs">0</span></button>
            <button onclick="switchSection('contact', this)" class="tab-btn px-4 py-2 rounded-lg font-bold transition-all"><i class="fas fa-phone mr-2"></i>Contact Info</button>
        </div>












        <!-- ===== PROFILE SECTION ===== -->
        <div id="section-profile" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-id-card mr-2"></i>Edit Profile</h2>
                <form id="editProfileForm" class="space-y-6">
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Profile Name</label>
                        <input type="text" id="profileNameInput" placeholder="Your Name"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Profile Image URL</label>
                        <input type="url" id="profileImageInput" placeholder="https://example.com/image.jpg"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <p class="text-gray-400 text-xs mt-2">This image will appear in the navigation sidebar and about section</p>
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Preview</label>
                        <img id="profileImagePreview" src="https://via.placeholder.com/200x200" alt="Preview" class="w-48 h-48 rounded-xl object-cover border-2 border-cyan-400">
                    </div>
                    <button type="submit"
                        class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                        <i class="fas fa-save mr-2"></i>Save Profile
                    </button>
                </form>

                <!-- Social Media Links Section -->
                <h3 class="text-xl font-bold text-cyan-400 mt-8 mb-4"><i class="fas fa-share-alt mr-2"></i>Social Media Links</h3>
                <form id="editSocialForm" class="space-y-4">
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">GitHub URL</label>
                        <input type="url" id="socialGithuburlInput" placeholder="https://github.com/username"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">LinkedIn URL</label>
                        <input type="url" id="socialLinkedInUrlInput" placeholder="https://linkedin.com/in/username"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Twitter URL</label>
                        <input type="url" id="socialTwitterUrlInput" placeholder="https://twitter.com/username"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Instagram URL</label>
                        <input type="url" id="socialInstagramUrlInput" placeholder="https://instagram.com/username"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <button type="submit"
                        class="w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 p-4 rounded-xl text-xl font-bold">
                        <i class="fas fa-save mr-2"></i>Save Social Links
                    </button>
                </form>
            </div>
        </div>

        <!-- ===== MESSAGES SECTION ===== -->
        <div id="section-messages" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-envelope mr-2"></i>Contact Messages</h2>
                <div id="messagesList" class="space-y-4">
                    <p class="text-gray-400 p-4">Loading messages...</p>
                </div>
            </div>
        </div>

        <!-- ===== CONTACT INFO SECTION ===== -->
        <div id="section-contact" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-phone mr-2"></i>Edit Contact Information</h2>
                <form id="editContactForm" class="space-y-6">
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Address</label>
                        <input type="text" id="contactAddressText" placeholder="Dhaka, Bangladesh"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Phone Number</label>
                        <input type="tel" id="contactPhoneText" placeholder="+880 1709047397"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Email Address</label>
                        <input type="email" id="contactEmailText" placeholder="goutom.roy0364@gmail.com"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <button type="submit"
                        class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                        <i class="fas fa-save mr-2"></i>Save Contact Information
                    </button>
                </form>
            </div>
        </div>

        <!-- ===== HERO SECTION ===== -->
        <div id="section-hero" class="section-content active">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 mb-12">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-plus mr-2"></i>Add Hero Image</h2>
                <form id="addHeroForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="text" id="heroTitle" placeholder="Image Title (optional)"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="number" id="heroOrder" placeholder="Display Order (1, 2, 3...)" min="1"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="url" id="heroImg" placeholder="Image URL"
                        class="md:col-span-2 p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <button type="submit"
                        class="md:col-span-2 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                        <i class="fas fa-plus mr-2"></i>Add Hero Image
                    </button>
                </form>
            </div>

            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400">Hero Images List</h2>
                <div id="heroImagesList" class="space-y-4">
                    <!-- Loads dynamically -->
                </div>
            </div>
        </div>

        <!-- ===== ABOUT SECTION ===== -->
        <div id="section-about" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-user mr-2"></i>Edit About Section</h2>
                <form id="editAboutForm" class="space-y-6">
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Intro Text</label>
                        <textarea id="aboutIntroText" placeholder="Enter intro text" rows="2"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400"></textarea>
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Main Headline</label>
                        <input type="text" id="aboutHeadlineText" placeholder="e.g., Building Seamless Digital Experiences"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>
                    <div>
                        <label class="block text-cyan-400 font-semibold mb-2">Description Paragraph</label>
                        <textarea id="aboutDescriptionText" placeholder="Enter detailed description" rows="3"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400"></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-cyan-400 font-semibold mb-2">Email</label>
                            <input type="email" id="aboutEmailText" placeholder="your.email@example.com"
                                class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        </div>
                        <div>
                            <label class="block text-cyan-400 font-semibold mb-2">Core Tech</label>
                            <input type="text" id="aboutCoreTechText" placeholder="Java, Python, Android, etc"
                                class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        </div>
                        <div>
                            <label class="block text-cyan-400 font-semibold mb-2">Degree</label>
                            <input type="text" id="aboutDegreeText" placeholder="Computer Science & Engineering"
                                class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        </div>
                        <div>
                            <label class="block text-cyan-400 font-semibold mb-2">Status</label>
                            <input type="text" id="aboutStatusText" placeholder="Actively Seeking Internships"
                                class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        </div>
                    </div>
                    <button type="submit"
                        class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                        <i class="fas fa-save mr-2"></i>Save About Section
                    </button>
                </form>
            </div>
        </div>

        <!-- ===== EDUCATION SECTION ===== -->
        <div id="section-education" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-graduation-cap mr-2"></i>Edit Education Section</h2>
                <form id="editEducationForm" class="space-y-6">
                    <h3 class="text-xl font-bold text-cyan-300 mt-8 mb-4">Bachelor of Science (CSE)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" id="eduBSCUniversityText" placeholder="University"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="eduBSCCGPAText" placeholder="CGPA (e.g., 3.54 / 4.00)"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="eduBSCYearText" placeholder="Year (e.g., 2026)"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>

                    <h3 class="text-xl font-bold text-cyan-300 mt-8 mb-4">Higher Secondary Certificate</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" id="eduHSCInstituteText" placeholder="Institute"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="eduHSCGPAText" placeholder="GPA (e.g., 5.00 / 5.00)"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="eduHSCYearText" placeholder="Year (e.g., 2020)"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>

                    <h3 class="text-xl font-bold text-cyan-300 mt-8 mb-4">Secondary School Certificate</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" id="eduSSCInstituteText" placeholder="Institute"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="eduSSCGPAText" placeholder="GPA (e.g., 5.00 / 5.00)"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="eduSSCYearText" placeholder="Year (e.g., 2018)"
                            class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    </div>

                    <button type="submit"
                        class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold mt-8">
                        <i class="fas fa-save mr-2"></i>Save Education Section
                    </button>
                </form>
            </div>
        </div>

        <!-- ===== EXPERIENCE SECTION ===== -->
        <div id="section-experience" class="section-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Add Experience Form -->
                <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 md:col-span-1">
                    <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-briefcase mr-2"></i>Add Experience</h2>
                    <form id="addExperienceForm" class="space-y-4">
                        <input type="text" id="expTitle" placeholder="Job Title (e.g., Frontend Developer)"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="text" id="expCompany" placeholder="Company Name"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="url" id="expWebsite" placeholder="Company Website URL (optional)"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" id="expStart" placeholder="Start (e.g., Jun 2023)"
                                class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                            <input type="text" id="expEnd" placeholder="End (e.g., Present or Dec 2024)"
                                class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        </div>
                        <textarea id="expDesc" placeholder="Short description" rows="3"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400"></textarea>
                        <div class="flex gap-3">
                            <button type="submit"
                                class="flex-1 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                                <i class="fas fa-plus mr-2"></i><span id="experienceSubmitText">Add Experience</span>
                            </button>
                            <button id="cancelExpEditBtn" type="button" class="hidden bg-gray-700 hover:bg-gray-600 p-4 rounded-xl text-white">Cancel Edit</button>
                        </div>
                    </form>
                </div>

                <!-- Experience List -->
                <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 md:col-span-1">
                    <h2 class="text-2xl font-bold mb-6 text-cyan-400">Work Experience</h2>
                    <div id="experienceList" class="space-y-3">
                        <!-- Loads dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== SKILLS SECTION ===== -->
        <div id="section-skills" class="section-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Add Skill Form -->
                <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 md:col-span-1">
                    <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-plus mr-2"></i>Add Skill</h2>
                    <form id="addSkillForm" class="space-y-4">
                        <input type="text" id="skillName" placeholder="Skill Name (e.g., JavaScript)"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <input type="url" id="skillIcon" placeholder="Icon URL (e.g., https://...)"
                            class="w-full p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <button type="submit"
                            class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                            <i class="fas fa-plus mr-2"></i>Add Skill
                        </button>
                    </form>
                </div>

                <!-- Skills List -->
                <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 md:col-span-1">
                    <h2 class="text-2xl font-bold mb-6 text-cyan-400">Technical Stack</h2>
                    <div id="skillsList" class="space-y-3">
                        <!-- Loads dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PROJECTS SECTION ===== -->
        <!-- ===== BLOG SECTION ===== -->
        <div id="section-blog" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 mb-12">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-pen-fancy mr-2"></i>Add New Blog Post</h2>
                <form id="addBlogForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="text" id="blogTitle" placeholder="Blog Post Title"
                        class="md:col-span-2 p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="text" id="blogCategory" placeholder="Category (e.g., AI & Dev, Affiliate & SEO)"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="url" id="blogImage" placeholder="Featured Image URL"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="number" id="blogReadTime" placeholder="Read Time (minutes)" min="1"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="number" id="blogViews" placeholder="Views" min="0"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="url" id="blogLink" placeholder="Read More Link / Blog URL"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <textarea id="blogExcerpt" placeholder="Excerpt/Description" rows="2"
                        class="md:col-span-2 p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400"></textarea>
                    <textarea id="blogDescription" placeholder="Full Description" rows="4"
                        class="md:col-span-2 p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400"></textarea>
                    <input type="date" id="blogPublishDate" 
                        class="md:col-span-2 p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <div class="md:col-span-2 flex gap-3">
                        <button id="blogSubmitBtn" type="submit"
                            class="flex-1 bg-gradient-to-r from-pink-500 to-cyan-500 hover:from-pink-600 hover:to-cyan-600 p-4 rounded-xl text-xl font-bold">
                            <i class="fas fa-plus mr-2"></i><span id="blogSubmitText">Add Blog Post</span>
                        </button>
                        <button id="blogCancelEditBtn" type="button" class="hidden bg-gray-700 hover:bg-gray-600 p-4 rounded-xl text-white">Cancel Edit</button>
                    </div>
                </form>
            </div>

            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400">Blog Posts List</h2>
                <div id="blogList" class="space-y-4">
                    <p class="text-gray-400">Loading blog posts...</p>
                </div>
            </div>
        </div>

        <div id="section-projects" class="section-content">
            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8 mb-12">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400"><i class="fas fa-plus mr-2"></i>Add New Project</h2>
                <form id="addProjectForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="text" id="title" placeholder="Project Title"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <select id="category" class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                        <option value="web">Web</option>
                        <option value="mobile">Mobile apps</option>
                        <option value="tool">Tool</option>
                        <option value="other">Other</option>
                    </select>
                    <input type="url" id="img" placeholder="Image URL"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="text" id="techStack" placeholder="Tech Stack (comma separated)"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="url" id="previewLink" placeholder="Preview Link (optional)"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <input type="url" id="detailsLink" placeholder="Details Link (optional)"
                        class="p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400">
                    <textarea id="desc" placeholder="Short description" rows="3"
                        class="md:col-span-2 p-4 rounded-xl bg-black/30 border border-gray-600 text-white focus:border-cyan-400"></textarea>
                    <div class="md:col-span-2 flex gap-3">
                        <button id="projectSubmitBtn" type="submit"
                            class="flex-1 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 p-4 rounded-xl text-xl font-bold">
                            <i class="fas fa-plus mr-2"></i><span id="projectSubmitText">Add Project</span>
                        </button>
                        <button id="cancelEditBtn" type="button" class="hidden bg-gray-700 hover:bg-gray-600 p-4 rounded-xl text-white">Cancel Edit</button>
                    </div>
                </form>
            </div>

            <div class="bg-black/50 backdrop-blur-md rounded-3xl p-8">
                <h2 class="text-2xl font-bold mb-6 text-cyan-400">Projects List</h2>
                <div id="projectsList" class="space-y-4">
                    <!-- Loads dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Define switchSection early so it's available globally -->
    <script>
        window.switchSection = function(section, button) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active'));
            
            // Remove active from all buttons
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            // Show the selected section
            const sectionEl = document.getElementById(`section-${section}`);
            if (sectionEl) {
                sectionEl.classList.add('active');
            }
            
            // Add active to the clicked button
            if (button) {
                button.classList.add('active');
            }
            
            // Scroll to top for better UX
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        // Mobile Navigation Toggle
        window.toggleMobileNav = function() {
            const sideNav = document.getElementById('sideNav');
            const navOverlay = document.getElementById('navOverlay');
            
            if (sideNav && navOverlay) {
                sideNav.classList.toggle('-translate-x-full');
                navOverlay.classList.toggle('active');
            }
        };

        // Logout function
        window.logout = function() {
            localStorage.removeItem("adminPass");
            location.href = "/login.html";
        };
    </script>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, getDoc, deleteDoc, doc, orderBy, query, setDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

        // Close mobile menu on window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768) {
                document.getElementById('sideNav').classList.remove('-translate-x-full');
                document.getElementById('navOverlay').classList.remove('active');
            }
        });

        const firebaseConfig = {
            apiKey: "AIzaSyDXaBrKqNaTFmvBYmfhT-fpePzzrL8nBWk",
            authDomain: "my-portfolio-6d703.firebaseapp.com",
            projectId: "my-portfolio-6d703",
            storageBucket: "my-portfolio-6d703.firebasestorage.app",
            messagingSenderId: "587930086992",
            appId: "1:587930086992:web:3deafa045acc32456d6b55"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const ADMIN_PASSWORD = "portfolio2026";
        const pass = localStorage.getItem("adminPass");

        if (pass !== ADMIN_PASSWORD) {
            location.href = "/login.html";
        }

        // ===== MESSAGES =====
        async function loadMessages() {
            try {
                const q = query(collection(db, 'messages'), orderBy('createdAt', 'desc'));
                const snapshot = await getDocs(q);
                const list = document.getElementById('messagesList');
                const count = snapshot.size;
                document.getElementById('messageCount').textContent = count;

                list.innerHTML = '';

                if (snapshot.empty) {
                    list.innerHTML = '<p class="text-gray-400 p-4">No messages yet</p>';
                    return;
                }

                snapshot.forEach((docSnap) => {
                    const data = docSnap.data();
                    let date = '';
                    try {
                        if (data && data.createdAt) {
                            // Firestore may return a Timestamp object with toDate()
                            if (typeof data.createdAt.toDate === 'function') {
                                date = data.createdAt.toDate().toLocaleString();
                            } else if (typeof data.createdAt === 'string') {
                                date = new Date(data.createdAt).toLocaleString();
                            } else {
                                date = new Date(data.createdAt).toLocaleString();
                            }
                        }
                    } catch (err) {
                        date = '';
                    }

                    list.innerHTML += `
                        <div class="bg-gray-800/50 rounded-2xl p-6 group hover:bg-gray-700/50">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h3 class="font-bold text-lg text-cyan-400">${data.name}</h3>
                                    <p class="text-sm text-gray-400">${data.email}</p>
                                </div>
                                <button onclick="deleteMessage('${docSnap.id}')" class="bg-red-500 hover:bg-red-600 p-2 rounded text-white">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                            <h4 class="font-semibold text-white mb-2">Subject: ${data.subject}</h4>
                            <p class="text-gray-300 mb-3">${data.message}</p>
                            <p class="text-xs text-gray-500"><i class="fas fa-clock mr-1"></i>${date}</p>
                        </div>
                    `;
                });
            } catch (error) {
                console.error("Error loading messages:", error);
            }
        }

        window.deleteMessage = async (id) => {
            if (confirm('Delete this message?')) {
                await deleteDoc(doc(db, 'messages', id));
                loadMessages();
            }
        };

        // ===== PROFILE MANAGEMENT =====
        document.getElementById('editProfileForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const profileData = {
                    profileName: document.getElementById('profileNameInput').value,
                    profileImage: document.getElementById('profileImageInput').value,
                    updatedAt: new Date()
                };
                
                if (!profileData.profileName || !profileData.profileImage) {
                    alert('❌ Please fill in all fields');
                    return;
                }

                await setDoc(doc(db, 'profile', 'main'), profileData);
                alert('✅ Profile updated! Refresh the portfolio page to see changes.');
                loadProfileForm();
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadProfileForm() {
            try {
                const profileRef = doc(db, 'profile', 'main');
                const snap = await getDoc(profileRef);
                if (snap && snap.exists()) {
                    const data = snap.data();
                    document.getElementById('profileNameInput').value = data.profileName || '';
                    document.getElementById('profileImageInput').value = data.profileImage || '';
                    document.getElementById('profileImagePreview').src = data.profileImage || 'https://via.placeholder.com/200x200';
                    
                    // Update nav images
                    document.getElementById('navProfileImage').src = data.profileImage || 'https://via.placeholder.com/200x200';
                    document.getElementById('mobileProfileImage').src = data.profileImage || 'https://via.placeholder.com/200x200';
                    document.getElementById('navProfileName').textContent = data.profileName || 'Your Name';
                    document.getElementById('mobileProfileName').textContent = data.profileName || 'Your Name';
                }
            } catch (error) {
                console.error("Error loading profile:", error);
            }
        }

        // Live preview for profile image
        document.getElementById('profileImageInput').addEventListener('change', function() {
            document.getElementById('profileImagePreview').src = this.value || 'https://via.placeholder.com/200x200';
        });

        // ===== SOCIAL MEDIA FORM =====
        document.getElementById('editSocialForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const socialData = {
                    github: document.getElementById('socialGithuburlInput').value,
                    linkedin: document.getElementById('socialLinkedInUrlInput').value,
                    twitter: document.getElementById('socialTwitterUrlInput').value,
                    instagram: document.getElementById('socialInstagramUrlInput').value,
                    updatedAt: new Date()
                };
                
                await setDoc(doc(db, 'social', 'links'), socialData);
                alert('✅ Social media links updated!');
                loadSocialLinks();
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadSocialLinks() {
            try {
                const socialRef = doc(db, 'social', 'links');
                const snap = await getDoc(socialRef);
                if (snap && snap.exists()) {
                    const data = snap.data();
                    document.getElementById('socialGithuburlInput').value = data.github || '';
                    document.getElementById('socialLinkedInUrlInput').value = data.linkedin || '';
                    document.getElementById('socialTwitterUrlInput').value = data.twitter || '';
                    document.getElementById('socialInstagramUrlInput').value = data.instagram || '';
                }
            } catch (error) {
                console.error("Error loading social links:", error);
            }
        }

        // ===== CONTACT INFO =====
        document.getElementById('editContactForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const contactData = {
                    address: document.getElementById('contactAddressText').value,
                    phone: document.getElementById('contactPhoneText').value,
                    email: document.getElementById('contactEmailText').value,
                    updatedAt: new Date()
                };
                
                await setDoc(doc(db, 'contact', 'main'), contactData);
                alert('✅ Contact information updated!');
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadContactForm() {
            try {
                const contactRef = doc(db, 'contact', 'main');
                const snap = await getDoc(contactRef);
                if (snap && snap.exists()) {
                    const data = snap.data();
                    document.getElementById('contactAddressText').value = data.address || '';
                    document.getElementById('contactPhoneText').value = data.phone || '';
                    document.getElementById('contactEmailText').value = data.email || '';
                }
            } catch (error) {
                console.error("Error loading contact form:", error);
            }
        }

        // ===== HERO IMAGES =====
        document.getElementById('addHeroForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = document.getElementById('heroTitle').value || 'Hero Image';
            const img = document.getElementById('heroImg').value;
            const order = parseInt(document.getElementById('heroOrder').value) || 1;

            if (!img) {
                alert('❌ Please enter image URL');
                return;
            }

            try {
                await addDoc(collection(db, 'heroImages'), { title, img, order });
                alert('✅ Hero image added!');
                loadHeroImages();
                e.target.reset();
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadHeroImages() {
            try {
                const q = query(collection(db, 'heroImages'), orderBy('order'));
                const snapshot = await getDocs(q);
                const list = document.getElementById('heroImagesList');
                list.innerHTML = '';

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    list.innerHTML += `
                        <div class="flex justify-between items-center p-6 bg-gray-800/50 rounded-2xl group hover:bg-gray-700/50">
                            <div>
                                <h3 class="font-bold text-xl">${data.title}</h3>
                                <p class="text-cyan-400 text-sm">Order: ${data.order}</p>
                                <img src="${data.img}" class="w-32 h-20 object-cover rounded-lg mt-2">
                            </div>
                            <button onclick="deleteHeroImage('${doc.id}')" class="bg-red-500 hover:bg-red-600 p-3 rounded-xl text-white font-bold group-hover:scale-110">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                });

                if (snapshot.empty) {
                    list.innerHTML = '<p class="text-gray-400 p-4">No hero images yet</p>';
                }
            } catch (error) {
                console.error("Error loading hero images:", error);
            }
        }

        window.deleteHeroImage = async (id) => {
            if (confirm('Delete this hero image?')) {
                await deleteDoc(doc(db, 'heroImages', id));
                loadHeroImages();
            }
        };

        // ===== ABOUT SECTION =====
        document.getElementById('editAboutForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const aboutData = {
                    introText: document.getElementById('aboutIntroText').value,
                    headline: document.getElementById('aboutHeadlineText').value,
                    description: document.getElementById('aboutDescriptionText').value,
                    email: document.getElementById('aboutEmailText').value,
                    coreTech: document.getElementById('aboutCoreTechText').value,
                    degree: document.getElementById('aboutDegreeText').value,
                    status: document.getElementById('aboutStatusText').value,
                    updatedAt: new Date()
                };
                
                await setDoc(doc(db, 'about', 'main'), aboutData);
                alert('✅ About section updated!');
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadAboutForm() {
            try {
                const aboutDoc = await getDocs(collection(db, 'about'));
                if (!aboutDoc.empty) {
                    const data = aboutDoc.docs[0].data();
                    document.getElementById('aboutIntroText').value = data.introText || '';
                    document.getElementById('aboutHeadlineText').value = data.headline || '';
                    document.getElementById('aboutDescriptionText').value = data.description || '';
                    document.getElementById('aboutEmailText').value = data.email || '';
                    document.getElementById('aboutCoreTechText').value = data.coreTech || '';
                    document.getElementById('aboutDegreeText').value = data.degree || '';
                    document.getElementById('aboutStatusText').value = data.status || '';
                }
            } catch (error) {
                console.error("Error loading about form:", error);
            }
        }

        // ===== EDUCATION SECTION =====
        document.getElementById('editEducationForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const educationData = {
                    bsc: {
                        university: document.getElementById('eduBSCUniversityText').value,
                        cgpa: document.getElementById('eduBSCCGPAText').value,
                        year: document.getElementById('eduBSCYearText').value
                    },
                    hsc: {
                        institute: document.getElementById('eduHSCInstituteText').value,
                        gpa: document.getElementById('eduHSCGPAText').value,
                        year: document.getElementById('eduHSCYearText').value
                    },
                    ssc: {
                        institute: document.getElementById('eduSSCInstituteText').value,
                        gpa: document.getElementById('eduSSCGPAText').value,
                        year: document.getElementById('eduSSCYearText').value
                    },
                    updatedAt: new Date()
                };
                
                await setDoc(doc(db, 'education', 'main'), educationData);
                alert('✅ Education section updated!');
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadEducationForm() {
            try {
                const eduDoc = await getDocs(collection(db, 'education'));
                if (!eduDoc.empty) {
                    const data = eduDoc.docs[0].data();
                    if (data.bsc) {
                        document.getElementById('eduBSCUniversityText').value = data.bsc.university || '';
                        document.getElementById('eduBSCCGPAText').value = data.bsc.cgpa || '';
                        document.getElementById('eduBSCYearText').value = data.bsc.year || '';
                    }
                    if (data.hsc) {
                        document.getElementById('eduHSCInstituteText').value = data.hsc.institute || '';
                        document.getElementById('eduHSCGPAText').value = data.hsc.gpa || '';
                        document.getElementById('eduHSCYearText').value = data.hsc.year || '';
                    }
                    if (data.ssc) {
                        document.getElementById('eduSSCInstituteText').value = data.ssc.institute || '';
                        document.getElementById('eduSSCGPAText').value = data.ssc.gpa || '';
                        document.getElementById('eduSSCYearText').value = data.ssc.year || '';
                    }
                }
            } catch (error) {
                console.error("Error loading education form:", error);
            }
        }

        // ===== SKILLS MANAGEMENT =====
        document.getElementById('addSkillForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('skillName').value;
            const icon = document.getElementById('skillIcon').value;

            if (!name || !icon) {
                alert('❌ Please enter skill name and icon URL');
                return;
            }

            try {
                const skillsDoc = await getDocs(collection(db, 'skills'));
                let items = [];
                let docId = 'main';

                if (!skillsDoc.empty) {
                    const data = skillsDoc.docs[0].data();
                    items = data.items || [];
                    docId = skillsDoc.docs[0].id;
                }

                items.push({ name, icon });
                await setDoc(doc(db, 'skills', docId), { items });
                alert('✅ Skill added!');
                loadSkills();
                e.target.reset();
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadSkills() {
            try {
                const skillsDoc = await getDocs(collection(db, 'skills'));
                const list = document.getElementById('skillsList');
                list.innerHTML = '';

                if (!skillsDoc.empty) {
                    const data = skillsDoc.docs[0].data();
                    const docId = skillsDoc.docs[0].id;

                    if (data.items && Array.isArray(data.items)) {
                        data.items.forEach((skill, index) => {
                            list.innerHTML += `
                                <div class="flex justify-between items-center p-4 bg-gray-800/50 rounded-xl group hover:bg-gray-700/50">
                                    <div class="flex items-center gap-3">
                                        <img src="${skill.icon}" alt="${skill.name}" class="w-8 h-8 object-contain">
                                        <span class="text-white">${skill.name}</span>
                                    </div>
                                    <button onclick="deleteSkill('${docId}', ${index})" class="bg-red-500 hover:bg-red-600 p-2 rounded-lg text-white">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            `;
                        });
                    }
                }
            } catch (error) {
                console.error("Error loading skills:", error);
            }
        }

        window.deleteSkill = async (docId, index) => {
            if (confirm('Delete this skill?')) {
                try {
                    const snap = await getDocs(collection(db, 'skills'));
                    if (!snap.empty) {
                        const data = snap.docs[0].data();
                        let items = data.items || [];
                        items.splice(index, 1);
                        await setDoc(doc(db, 'skills', docId), { items });
                        loadSkills();
                    }
                } catch (error) {
                    alert('❌ Error: ' + error.message);
                }
            }
        };

        // ===== EXPERIENCE MANAGEMENT =====
        document.getElementById('addExperienceForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const editId = form.dataset.editId || '';
            const title = document.getElementById('expTitle').value;
            const company = document.getElementById('expCompany').value;
            const website = document.getElementById('expWebsite').value || '';
            const startDate = document.getElementById('expStart').value || '';
            const endDate = document.getElementById('expEnd').value || '';
            const desc = document.getElementById('expDesc').value || '';

            if (!title || !company) {
                alert('❌ Please provide at least a title and company');
                return;
            }

            try {
                if (editId) {
                    await setDoc(doc(db, 'experience', editId), { title, company, website, startDate, endDate, desc, updatedAt: serverTimestamp() }, { merge: true });
                    alert('✅ Experience updated!');
                    delete form.dataset.editId;
                    document.getElementById('experienceSubmitText').textContent = 'Add Experience';
                    document.getElementById('cancelExpEditBtn').classList.add('hidden');
                } else {
                    await addDoc(collection(db, 'experience'), { title, company, website, startDate, endDate, desc, createdAt: serverTimestamp(), updatedAt: serverTimestamp() });
                    alert('✅ Experience added!');
                    localStorage.setItem('experienceUpdated', new Date().getTime());
                }

                loadExperience();
                form.reset();
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        async function loadExperience() {
            try {
                const q = query(collection(db, 'experience'), orderBy('startDate'));
                const snapshot = await getDocs(q);
                const list = document.getElementById('experienceList');
                list.innerHTML = '';

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    list.innerHTML += `
                        <div class="p-4 bg-gray-800/50 rounded-xl group hover:bg-gray-700/50">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <h3 class="font-bold text-lg text-cyan-300">${data.title} <span class="text-sm text-gray-300">@ ${data.company}</span></h3>
                                    <div class="text-gray-400 text-sm mt-2">${data.startDate?data.startDate:''}${data.endDate?(' — '+data.endDate):''}</div>
                                    <div class="mt-3 text-gray-300 text-sm">${(data.desc||'').substring(0,240)}${(data.desc||'').length>240? '...':''}</div>
                                    ${data.website ? `<div class="mt-2"><a href="${data.website}" target="_blank" class="text-cyan-400 hover:underline text-sm"><i class="fas fa-link mr-1"></i>Visit Company</a></div>` : ''}
                                </div>
                                <div class="flex flex-col items-end ml-4 gap-3">
                                    <div class="flex gap-2">
                                        <button onclick="editExperience('${doc.id}')" class="bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-2 rounded">Edit</button>
                                        <button onclick="deleteExperience('${doc.id}')" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            } catch (error) {
                // fallback: try without ordering
                try {
                    const snapshot = await getDocs(collection(db, 'experience'));
                    const list = document.getElementById('experienceList');
                    list.innerHTML = '';
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        list.innerHTML += `
                            <div class="p-4 bg-gray-800/50 rounded-xl group hover:bg-gray-700/50">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <h3 class="font-bold text-lg text-cyan-300">${data.title} <span class="text-sm text-gray-300">@ ${data.company}</span></h3>
                                        <div class="text-gray-400 text-sm mt-2">${data.startDate?data.startDate:''}${data.endDate?(' — '+data.endDate):''}</div>
                                        <div class="mt-3 text-gray-300 text-sm">${(data.desc||'').substring(0,240)}${(data.desc||'').length>240? '...':''}</div>
                                        ${data.website ? `<div class="mt-2"><a href="${data.website}" target="_blank" class="text-cyan-400 hover:underline text-sm"><i class="fas fa-link mr-1"></i>Visit Company</a></div>` : ''}
                                    </div>
                                    <div class="flex flex-col items-end ml-4 gap-3">
                                        <div class="flex gap-2">
                                            <button onclick="editExperience('${doc.id}')" class="bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-2 rounded">Edit</button>
                                            <button onclick="deleteExperience('${doc.id}')" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                } catch (err) {
                    console.error('Error loading experience:', err);
                }
            }
        }

        window.deleteExperience = async (id) => {
            if (confirm('Delete this experience?')) {
                try {
                    await deleteDoc(doc(db, 'experience', id));
                    loadExperience();
                } catch (error) {
                    alert('❌ Error: ' + error.message);
                }
            }
        };

        window.editExperience = async (id) => {
            try {
                const snap = await getDoc(doc(db, 'experience', id));
                if (!snap.exists()) return alert('Experience not found');
                const data = snap.data();
                const form = document.getElementById('addExperienceForm');
                form.dataset.editId = id;
                document.getElementById('expTitle').value = data.title || '';
                document.getElementById('expCompany').value = data.company || '';
                document.getElementById('expWebsite').value = data.website || '';
                document.getElementById('expStart').value = data.startDate || '';
                document.getElementById('expEnd').value = data.endDate || '';
                document.getElementById('expDesc').value = data.desc || '';
                document.getElementById('experienceSubmitText').textContent = 'Update Experience';
                document.getElementById('cancelExpEditBtn').classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                console.error('Error editing experience:', error);
            }
        };

        // Cancel experience edit
        document.getElementById('cancelExpEditBtn').addEventListener('click', (e) => {
            const form = document.getElementById('addExperienceForm');
            delete form.dataset.editId;
            form.reset();
            document.getElementById('experienceSubmitText').textContent = 'Add Experience';
            document.getElementById('cancelExpEditBtn').classList.add('hidden');
        });

        // ===== PROJECTS =====
        document.getElementById('addProjectForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const editId = form.dataset.editId || '';
            const title = document.getElementById('title').value;
            const category = document.getElementById('category').value || 'other';
            const img = document.getElementById('img').value;
            const techStack = document.getElementById('techStack').value || '';
            const previewLink = document.getElementById('previewLink').value || '';
            const detailsLink = document.getElementById('detailsLink').value || '';
            const desc = document.getElementById('desc').value || '';

            if (!title || !img) {
                alert('❌ Please provide at least a title and image URL');
                return;
            }

            try {
                if (editId) {
                    // update existing
                    await setDoc(doc(db, 'projects', editId), { title, category, img, techStack, previewLink, detailsLink, desc, updatedAt: serverTimestamp() }, { merge: true });
                    alert('✅ Project updated!');
                    // clear edit state
                    delete form.dataset.editId;
                    document.getElementById('projectSubmitText').textContent = 'Add Project';
                    document.getElementById('cancelEditBtn').classList.add('hidden');
                } else {
                    await addDoc(collection(db, 'projects'), { title, category, img, techStack, previewLink, detailsLink, desc, createdAt: serverTimestamp(), updatedAt: serverTimestamp() });
                    alert('✅ Project added!');
                    // Notify other tabs that a new project was added
                    localStorage.setItem('projectUpdated', new Date().getTime());
                }

                loadProjects();
                form.reset();
            } catch (error) {
                alert('❌ Error: ' + error.message);
            }
        });

        // Cancel edit
        document.getElementById('cancelEditBtn').addEventListener('click', (e) => {
            const form = document.getElementById('addProjectForm');
            delete form.dataset.editId;
            form.reset();
            document.getElementById('projectSubmitText').textContent = 'Add Project';
            document.getElementById('cancelEditBtn').classList.add('hidden');
        });

        // Edit project helper
        window.editProject = async (id) => {
            try {
                const snap = await getDoc(doc(db, 'projects', id));
                if (!snap.exists()) return alert('Project not found');
                const data = snap.data();
                const form = document.getElementById('addProjectForm');
                form.dataset.editId = id;
                document.getElementById('title').value = data.title || '';
                if (document.getElementById('category')) document.getElementById('category').value = data.category || 'other';
                document.getElementById('img').value = data.img || '';
                document.getElementById('techStack').value = data.techStack || '';
                document.getElementById('previewLink').value = data.previewLink || '';
                document.getElementById('detailsLink').value = data.detailsLink || '';
                document.getElementById('desc').value = data.desc || '';
                document.getElementById('projectSubmitText').textContent = 'Update Project';
                document.getElementById('cancelEditBtn').classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                console.error('Error editing project:', error);
            }
        };

        async function loadProjects() {
            try {
                const q = query(collection(db, 'projects'), orderBy('title'));
                const snapshot = await getDocs(q);
                const list = document.getElementById('projectsList');
                list.innerHTML = '';

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const techTags = (data.techStack || '').split(',').map(t => t.trim()).filter(Boolean);
                    const categoryLabel = data.category ? `<span class="inline-block bg-gray-700 text-xs text-gray-200 px-2 py-1 rounded ml-2">${data.category}</span>` : '';
                    list.innerHTML += `
                        <div class="p-6 bg-gray-800/50 rounded-2xl group hover:bg-gray-700/50">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <h3 class="font-bold text-xl text-cyan-300">${data.title}${categoryLabel}</h3>
                                    <div class="text-gray-400 text-sm mt-2">${(data.desc || '').substring(0, 180)}${(data.desc || '').length>180? '...':''}</div>
                                    <div class="mt-3 flex flex-wrap gap-2">
                                        ${techTags.map(tag => `<span class="bg-gray-700 text-xs text-gray-200 px-2 py-1 rounded">${tag}</span>`).join('')}
                                    </div>
                                    <div class="mt-3 flex gap-3">
                                        ${data.previewLink ? `<a href="${data.previewLink}" target="_blank" class="text-cyan-400 hover:underline">view</a>` : ''}
                                        ${data.detailsLink ? `<a href="${data.detailsLink}" target="_blank" class="text-gray-300 hover:underline">details</a>` : ''}
                                    </div>
                                </div>
                                <div class="flex flex-col items-end ml-4 gap-3">
                                    <div class="flex gap-2">
                                        <button onclick="editProject('${doc.id}')" class="bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-2 rounded">Edit</button>
                                        <button onclick="deleteProject('${doc.id}')" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            } catch (error) {
                console.error("Error loading projects:", error);
            }
        }

        window.deleteProject = async (id) => {
            if (confirm('Delete this project?')) {
                await deleteDoc(doc(db, 'projects', id));
                loadProjects();
            }
        };

        // Initialize all sections with delay to ensure DOM is ready
        setTimeout(() => {
            // Ensure hero section is visible on page load
            const heroSection = document.getElementById('section-hero');
            if (heroSection) {
                heroSection.classList.add('active');
            }
            
            // Load all data
            loadProfileForm();
            loadSocialLinks();
            loadHeroImages();
            loadAboutForm();
            loadEducationForm();
            loadExperience();
            loadSkills();
            loadProjects();
            loadBlogPosts();
            loadMessages();
            loadContactForm();
            
            console.log('✅ Admin Dashboard Initialized - All sections loaded from Firebase');
        }, 100);

        // ===== BLOG MANAGEMENT =====
        document.getElementById('addBlogForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const editId = e.target.dataset.editId;
            const publishDateInput = document.getElementById('blogPublishDate').value;
            
            // Create proper Firestore timestamp
            let publishDate;
            if (publishDateInput) {
                publishDate = new Date(publishDateInput);
            } else {
                publishDate = new Date();
            }
            
            const blogData = {
                title: document.getElementById('blogTitle').value,
                category: document.getElementById('blogCategory').value,
                image: document.getElementById('blogImage').value,
                readTime: parseInt(document.getElementById('blogReadTime').value) || 5,
                views: parseInt(document.getElementById('blogViews').value) || 0,
                link: document.getElementById('blogLink').value,
                excerpt: document.getElementById('blogExcerpt').value,
                description: document.getElementById('blogDescription').value,
                publishDate: publishDate,
                updatedAt: serverTimestamp()
            };

            try {
                if (editId) {
                    await setDoc(doc(db, 'blogPosts', editId), blogData, { merge: true });
                    console.log('✅ Blog post updated (id):', editId, blogData);
                    alert('✅ Blog post updated successfully!');
                } else {
                    const docRef = await addDoc(collection(db, 'blogPosts'), blogData);
                    console.log('✅ Blog post added with ID:', docRef.id, blogData);
                    alert('✅ Blog post added successfully! ID: ' + docRef.id);
                }
                e.target.reset();
                delete e.target.dataset.editId;
                document.getElementById('blogSubmitText').textContent = 'Add Blog Post';
                document.getElementById('blogCancelEditBtn').classList.add('hidden');
                loadBlogPosts();
            } catch (error) {
                console.error('Error saving blog post:', error);
                alert('❌ Error saving blog post. Please try again.');
            }
        });

        // Cancel edit for blog
        document.getElementById('blogCancelEditBtn').addEventListener('click', (e) => {
            const form = document.getElementById('addBlogForm');
            delete form.dataset.editId;
            form.reset();
            document.getElementById('blogSubmitText').textContent = 'Add Blog Post';
            document.getElementById('blogCancelEditBtn').classList.add('hidden');
        });

        // Edit blog helper
        window.editBlog = async (id) => {
            try {
                const snap = await getDoc(doc(db, 'blogPosts', id));
                if (!snap.exists()) return alert('Blog post not found');
                const data = snap.data();
                const form = document.getElementById('addBlogForm');
                form.dataset.editId = id;
                document.getElementById('blogTitle').value = data.title || '';
                document.getElementById('blogCategory').value = data.category || '';
                document.getElementById('blogImage').value = data.image || '';
                document.getElementById('blogReadTime').value = data.readTime || 5;
                document.getElementById('blogViews').value = data.views || 0;
                document.getElementById('blogLink').value = data.link || '';
                document.getElementById('blogExcerpt').value = data.excerpt || '';
                document.getElementById('blogDescription').value = data.description || '';
                const publishDate = data.publishDate?.toDate ? data.publishDate.toDate() : new Date(data.publishDate);
                document.getElementById('blogPublishDate').value = publishDate.toISOString().split('T')[0];
                document.getElementById('blogSubmitText').textContent = 'Update Blog Post';
                document.getElementById('blogCancelEditBtn').classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                console.error('Error editing blog post:', error);
            }
        };

        // Delete blog helper
        window.deleteBlog = async (id) => {
            if (confirm('Are you sure you want to delete this blog post?')) {
                try {
                    await deleteDoc(doc(db, 'blogPosts', id));
                    alert('✅ Blog post deleted successfully!');
                    loadBlogPosts();
                } catch (error) {
                    console.error('Error deleting blog post:', error);
                }
            }
        };

        async function loadBlogPosts() {
            try {
                const q = query(collection(db, 'blogPosts'), orderBy('publishDate', 'desc'));
                const snapshot = await getDocs(q);
                const list = document.getElementById('blogList');
                list.innerHTML = '';

                console.log('📝 Admin: Blog posts found:', snapshot.size);

                if (snapshot.empty) {
                    list.innerHTML = '<p class="text-gray-400">No blog posts yet. Create one to get started!</p>';
                    return;
                }

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    console.log('📄 Admin: Blog post:', data.title, data);
                    
                    let publishDate;
                    if (data.publishDate) {
                        if (data.publishDate.toDate && typeof data.publishDate.toDate === 'function') {
                            publishDate = data.publishDate.toDate();
                        } else if (data.publishDate instanceof Date) {
                            publishDate = data.publishDate;
                        } else {
                            publishDate = new Date(data.publishDate);
                        }
                    } else {
                        publishDate = new Date();
                    }
                    
                    const formattedDate = publishDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                    
                    list.innerHTML += `
                        <div class="p-6 bg-gray-800/50 rounded-2xl group hover:bg-gray-700/50">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <h3 class="font-bold text-xl text-pink-300">${data.title}</h3>
                                    <p class="text-gray-400 text-sm mt-1"><i class="fas fa-tag mr-1"></i>${data.category || 'Tech'}</p>
                                    <p class="text-gray-400 text-sm mt-2">${(data.excerpt || data.description || '').substring(0, 150)}${((data.excerpt || data.description) || '').length > 150 ? '...' : ''}</p>
                                    <div class="mt-3 text-gray-500 text-xs flex gap-3 flex-wrap">
                                        <span><i class="fas fa-calendar mr-1"></i>${formattedDate}</span>
                                        <span><i class="fas fa-clock mr-1"></i>${data.readTime || 5} min read</span>
                                        <span><i class="fas fa-eye mr-1"></i>${data.views || 0}+ views</span>
                                    </div>
                                    <div class="mt-3 flex gap-3">
                                        ${data.link ? `<a href="${data.link}" target="_blank" class="text-cyan-400 hover:underline text-sm">Read Article</a>` : ''}
                                    </div>
                                </div>
                                <div class="flex flex-col items-end ml-4 gap-3">
                                    <div class="flex gap-2">
                                        <button onclick="editBlog('${doc.id}')" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-white text-sm">Edit</button>
                                        <button onclick="deleteBlog('${doc.id}')" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-white text-sm">Delete</button>
                                    </div>
                                    ${data.image ? `<img src="${data.image}" alt="${data.title}" class="w-24 h-24 rounded object-cover border border-gray-600">` : '<div class="w-24 h-24 rounded bg-gray-700 flex items-center justify-center"><i class="fas fa-image text-gray-600"></i></div>'}
                                </div>
                            </div>
                        </div>
                    `;
                });
            } catch (error) {
                console.error('Error loading blog posts:', error);
            }
        }
